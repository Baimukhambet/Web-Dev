{"ast":null,"code":"import _asyncToGenerator from \"/Users/tima/kbtu/4thSemester/web/Lab4/angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nexport class SelectionController {\n  get dataState() {\n    return this.host.dataState;\n  }\n  resetSearchTerm() {\n    this.host.resetSearchTerm();\n  }\n  getValue(items) {\n    return items.map(value => {\n      if (typeof value === 'object' && value !== null) {\n        return this.host.displayKey ? String(value[this.host.displayKey]) : String(value);\n      } else {\n        return String(value);\n      }\n    }).join(', ');\n  }\n  handleChange(detail) {\n    this.host.requestUpdate('value');\n    return this.host.emitEvent('igcChange', {\n      cancelable: true,\n      detail\n    });\n  }\n  getItemsByValueKey(keys) {\n    return keys.map(key => this.dataState.find(i => i[this.host.valueKey] === key));\n  }\n  selectValueKeys(keys) {\n    if (keys.length === 0) return;\n    this.getItemsByValueKey(keys).forEach(item => {\n      return item && this._selected.add(item);\n    });\n  }\n  deselectValueKeys(keys) {\n    if (keys.length === 0) return;\n    this.getItemsByValueKey(keys).forEach(item => {\n      return item && this._selected.delete(item);\n    });\n  }\n  selectObjects(items) {\n    if (items.length === 0) return;\n    items.forEach(item => {\n      const i = this.dataState.includes(item);\n      if (i) {\n        this._selected.add(item);\n      }\n    });\n  }\n  deselectObjects(items) {\n    if (items.length === 0) return;\n    items.forEach(item => {\n      const i = this.dataState.includes(item);\n      if (i) {\n        this._selected.delete(item);\n      }\n    });\n  }\n  selectAll() {\n    this.dataState.filter(i => !i.header).forEach(item => {\n      this._selected.add(item);\n    });\n    this.host.requestUpdate();\n  }\n  deselectAll() {\n    this._selected.clear();\n    this.host.requestUpdate();\n  }\n  select(items, emit = false) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const {\n        singleSelect\n      } = _this.host;\n      if (singleSelect) {\n        _this._selected.clear();\n        _this.resetSearchTerm();\n      }\n      if (!items || items.length === 0) {\n        !singleSelect && _this.selectAll();\n        return;\n      }\n      const _items = singleSelect ? items.slice(0, 1) : items;\n      const values = _this.host.valueKey ? _this.getItemsByValueKey(_items) : _items;\n      const selected = Array.from(_this._selected.values());\n      const payload = [...values, ...selected];\n      if (emit && !_this.handleChange({\n        newValue: _this.getValue(payload),\n        items: values,\n        type: 'selection'\n      })) {\n        return;\n      }\n      if (_this.host.valueKey) {\n        _this.selectValueKeys(_items);\n      } else {\n        _this.selectObjects(_items);\n      }\n      _this.host.requestUpdate();\n    })();\n  }\n  deselect(items, emit = false) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const {\n        singleSelect\n      } = _this2.host;\n      if (!items || items.length === 0) {\n        if (emit && !_this2.handleChange({\n          newValue: '',\n          items: Array.from(_this2.selected),\n          type: 'deselection'\n        })) {\n          return;\n        }\n        !singleSelect && _this2.deselectAll();\n        return;\n      }\n      const _items = _this2.host.singleSelect ? items.slice(0, 1) : items;\n      const values = _this2.host.valueKey ? _this2.getItemsByValueKey(_items) : _items;\n      const selected = Array.from(_this2._selected.values());\n      const payload = structuredClone(selected);\n      payload.splice(selected.indexOf(values[0]));\n      if (emit && !_this2.handleChange({\n        newValue: _this2.getValue(payload),\n        items: values,\n        type: 'deselection'\n      })) {\n        return;\n      }\n      if (_this2.host.valueKey) {\n        _this2.deselectValueKeys(_items);\n      } else {\n        _this2.deselectObjects(_items);\n      }\n      _this2.host.requestUpdate();\n    })();\n  }\n  get selected() {\n    return this._selected;\n  }\n  changeSelection(index) {\n    const item = this.dataState[index];\n    if (this.host.valueKey) {\n      !this.selected.has(item) ? this.select([item[this.host.valueKey]], true) : this.deselect([item[this.host.valueKey]], true);\n    } else {\n      !this.selected.has(item) ? this.select([item], true) : this.deselect([item], true);\n    }\n  }\n  constructor(host) {\n    this.host = host;\n    this._selected = new Set();\n    this.host.addController(this);\n  }\n  hostConnected() {}\n  hostDisconnected() {}\n}","map":{"version":3,"names":["SelectionController","dataState","host","resetSearchTerm","getValue","items","map","value","displayKey","String","join","handleChange","detail","requestUpdate","emitEvent","cancelable","getItemsByValueKey","keys","key","find","i","valueKey","selectValueKeys","length","forEach","item","_selected","add","deselectValueKeys","delete","selectObjects","includes","deselectObjects","selectAll","filter","header","deselectAll","clear","select","emit","singleSelect","_items","slice","values","selected","Array","from","payload","newValue","type","deselect","structuredClone","splice","indexOf","changeSelection","index","has","constructor","Set","addController","hostConnected","hostDisconnected"],"sources":["/Users/tima/kbtu/4thSemester/web/Lab4/angular/node_modules/igniteui-webcomponents/components/combo/controllers/selection.js"],"sourcesContent":["export class SelectionController {\n    get dataState() {\n        return this.host.dataState;\n    }\n    resetSearchTerm() {\n        this.host.resetSearchTerm();\n    }\n    getValue(items) {\n        return items\n            .map((value) => {\n            if (typeof value === 'object' && value !== null) {\n                return this.host.displayKey\n                    ? String(value[this.host.displayKey])\n                    : String(value);\n            }\n            else {\n                return String(value);\n            }\n        })\n            .join(', ');\n    }\n    handleChange(detail) {\n        this.host.requestUpdate('value');\n        return this.host.emitEvent('igcChange', { cancelable: true, detail });\n    }\n    getItemsByValueKey(keys) {\n        return keys.map((key) => this.dataState.find((i) => i[this.host.valueKey] === key));\n    }\n    selectValueKeys(keys) {\n        if (keys.length === 0)\n            return;\n        this.getItemsByValueKey(keys).forEach((item) => {\n            return item && this._selected.add(item);\n        });\n    }\n    deselectValueKeys(keys) {\n        if (keys.length === 0)\n            return;\n        this.getItemsByValueKey(keys).forEach((item) => {\n            return item && this._selected.delete(item);\n        });\n    }\n    selectObjects(items) {\n        if (items.length === 0)\n            return;\n        items.forEach((item) => {\n            const i = this.dataState.includes(item);\n            if (i) {\n                this._selected.add(item);\n            }\n        });\n    }\n    deselectObjects(items) {\n        if (items.length === 0)\n            return;\n        items.forEach((item) => {\n            const i = this.dataState.includes(item);\n            if (i) {\n                this._selected.delete(item);\n            }\n        });\n    }\n    selectAll() {\n        this.dataState\n            .filter((i) => !i.header)\n            .forEach((item) => {\n            this._selected.add(item);\n        });\n        this.host.requestUpdate();\n    }\n    deselectAll() {\n        this._selected.clear();\n        this.host.requestUpdate();\n    }\n    async select(items, emit = false) {\n        const { singleSelect } = this.host;\n        if (singleSelect) {\n            this._selected.clear();\n            this.resetSearchTerm();\n        }\n        if (!items || items.length === 0) {\n            !singleSelect && this.selectAll();\n            return;\n        }\n        const _items = singleSelect ? items.slice(0, 1) : items;\n        const values = this.host.valueKey\n            ? this.getItemsByValueKey(_items)\n            : _items;\n        const selected = Array.from(this._selected.values());\n        const payload = [...values, ...selected];\n        if (emit &&\n            !this.handleChange({\n                newValue: this.getValue(payload),\n                items: values,\n                type: 'selection',\n            })) {\n            return;\n        }\n        if (this.host.valueKey) {\n            this.selectValueKeys(_items);\n        }\n        else {\n            this.selectObjects(_items);\n        }\n        this.host.requestUpdate();\n    }\n    async deselect(items, emit = false) {\n        const { singleSelect } = this.host;\n        if (!items || items.length === 0) {\n            if (emit &&\n                !this.handleChange({\n                    newValue: '',\n                    items: Array.from(this.selected),\n                    type: 'deselection',\n                })) {\n                return;\n            }\n            !singleSelect && this.deselectAll();\n            return;\n        }\n        const _items = this.host.singleSelect ? items.slice(0, 1) : items;\n        const values = this.host.valueKey\n            ? this.getItemsByValueKey(_items)\n            : _items;\n        const selected = Array.from(this._selected.values());\n        const payload = structuredClone(selected);\n        payload.splice(selected.indexOf(values[0]));\n        if (emit &&\n            !this.handleChange({\n                newValue: this.getValue(payload),\n                items: values,\n                type: 'deselection',\n            })) {\n            return;\n        }\n        if (this.host.valueKey) {\n            this.deselectValueKeys(_items);\n        }\n        else {\n            this.deselectObjects(_items);\n        }\n        this.host.requestUpdate();\n    }\n    get selected() {\n        return this._selected;\n    }\n    changeSelection(index) {\n        const item = this.dataState[index];\n        if (this.host.valueKey) {\n            !this.selected.has(item)\n                ? this.select([item[this.host.valueKey]], true)\n                : this.deselect([item[this.host.valueKey]], true);\n        }\n        else {\n            !this.selected.has(item)\n                ? this.select([item], true)\n                : this.deselect([item], true);\n        }\n    }\n    constructor(host) {\n        this.host = host;\n        this._selected = new Set();\n        this.host.addController(this);\n    }\n    hostConnected() { }\n    hostDisconnected() { }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}